<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>ë¡œê·¸ì¸</title>
</head>
<body>
    <h2>ë¡œê·¸ì¸</h2>
    <input type="text" id="username" placeholder="ì‚¬ìš©ì ì´ë¦„">
    <input type="password" id="password" placeholder="ë¹„ë°€ë²ˆí˜¸">
    <button onclick="login()">ë¡œê·¸ì¸</button>
    <p id="message"></p>

    <script>
        async function login() {
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            const messageElement = document.getElementById('message');

            try {
                const response = await fetch('/api/auth/login', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ username, password })
                });

                if (response.ok) {
                    const token = await response.text();
                    // ğŸš¨ í† í°ì„ ë¡œì»¬ ì €ì¥ì†Œì— ì €ì¥ (ë§¤ìš° ì¤‘ìš”)
                    localStorage.setItem('jwtToken', token.trim().replace('ë¡œê·¸ì¸ ì„±ê³µ: ', '')); 
                    
                    messageElement.textContent = 'ë¡œê·¸ì¸ ì„±ê³µ! ìºë¦­í„° í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤.';
                    setTimeout(() => window.location.href = 'success.html', 2000);
                } else {
                    const errorText = await response.text();
                    messageElement.textContent = `ë¡œê·¸ì¸ ì‹¤íŒ¨: ${errorText}`;
                }
            } catch (error) {
                messageElement.textContent = 'ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.';
            }
        }
    </script>
</body>
</html>